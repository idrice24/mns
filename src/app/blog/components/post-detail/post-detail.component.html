<!--TITLE-->
<p-toast position="bottom-center"></p-toast>
<section>
  <div class="row mb-5">
    <div class="col-md-12 text-center">
      <h1 data-aos="fade-in-up" data-aos-offset="100" class="text-primary">BLOG</h1>
      <img [src]="selectedTopic?.imageUrl" [alt]="selectedTopic?.imageUrl" *ngIf="selectedTopic?.imageUrl" />
    </div>
  </div>

  <p-fieldset *ngIf="selectedTopic" [legend]="header" [toggleable]="true">

    {{selectedTopic.content}}
  </p-fieldset><br>

  <!--My Tasks:
  1. Copy from Contact form
  2. Remove all Bindings with Component:ie [formGroup]="sendForm" to avoid error
  3. Only HTML elements should use here first: Design is finished
  4. Arrage Layout And RUN my stuffs NO error
  5. Check if the current Module imports all Needed PrimeNG Module
  6. Added Binding Object(i.e. commentForm) / Methods(ie.postYourComment) to connect html file and component file
   This is basic concept of angular
  -->

  <p-fieldset *ngIf="selectedTopic">
    <p *ngFor="let c of selectedTopic.comments">
      <span class="list-group-irem"><i style="color: blue">{{c.author}}:</i>&nbsp; {{c.msg}} <i style="float: right">{{c.createdDate}}</i> </span>
      <!-- it is  to display the commentvs and the date and time at which it has bieng commented -->
    </p>
  </p-fieldset>
  <hr>
  <form [formGroup]="commentForm" (ngSubmit)="postYourComment(commentForm.value)">
    <div class="p-fluid p-grid">

      <div class="p-col">
        <div class="p-field p-grid">
          <div class="p-inputgroup">
            <textarea pInputTextarea formControlName="msg" style="height:160px" placeholder="Message" required></textarea>
          </div>
        </div>
        <div *ngIf="msg.invalid && (msg.dirty || msg.touched)" class="p-col-12">
          <small *ngIf="msg.errors.required" class="p-invalid">Le Commentaire est requir.</small>
          <small *ngIf="msg.errors.minlength" class="p-invalid">Le Commentair doit etre de plus de 10 charactair
          </small>
        </div>
      </div>

      <div class="p-col">
        <div class="p-field p-grid">
          <div class="p-inputgroup">
            <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>
            <input pInputText formControlName="author" type="text" placeholder="Auteur" tooltip="this is the number of comments for this post!!" required>
          </div>
          <div *ngIf="author.invalid && (author.dirty || author.touched)" class="p-col-12">
            <small *ngIf="author.errors.required" class="p-invalid">Le nom est required.</small>
            <small *ngIf="author.errors.minlength" class="p-invalid">Le nom doit etre de plus de 4 charactere</small>
          </div>
        </div>

        <!--EMAIL-->
        <div class="p-field p-grid">
          <div class="p-inputgroup">
            <span class="p-inputgroup-addon"><i class="pi pi-envelope"></i></span>
            <input pInputText formControlName="email" type="email" placeholder="Email" required>
          </div>
          <div *ngIf="email.invalid && (email.dirty || email.touched)" class="p-col-12">
            <small *ngIf="email.errors.required" class="p-invalid">L'email est required.</small>
            <small *ngIf="email.errors.minlength" class="p-invalid">L'email doit etre de plus de 4 charactere.</small>
          </div>
        </div>

        <!-- pRipple is like hover it change the form of the button when i user point at it -->
        <div class="p-field p-grid">
          <button pButton pRipple [disabled]="!commentForm.valid" type="submit" label="Post your Comments"
            class="p-button-rounded"></button>
        </div>
      </div>
    </div>
  </form>
</section>

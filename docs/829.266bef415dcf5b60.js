"use strict";(self.webpackChunkmns=self.webpackChunkmns||[]).push([[829],{4829:(j,g,a)=>{a.r(g),a.d(g,{AuthModule:()=>G});var c=a(9808),m=a(4087),n=a(3075),e=a(7587),w=a(7850),N=a(2373),f=a(2313),v=a(4297),h=a(1424),x=a(8356),b=a(845),Z=a(5787);function T(t,o){1&t&&(e.TgZ(0,"small",18),e._uU(1,"Email is required."),e.qZA())}function I(t,o){if(1&t&&(e.TgZ(0,"div",7),e.YNc(1,T,2,0,"small",17),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.email.errors.required)}}function U(t,o){1&t&&(e.TgZ(0,"small",18),e._uU(1,"Name is required."),e.qZA())}function A(t,o){1&t&&(e.TgZ(0,"small",18),e._uU(1,"Name must be at least 4 characters long."),e.qZA())}function _(t,o){if(1&t&&(e.TgZ(0,"div",7),e.YNc(1,U,2,0,"small",17),e.YNc(2,A,2,0,"small",17),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.password.errors.required),e.xp6(1),e.Q6J("ngIf",i.password.errors.minlength)}}let F=(()=>{class t{constructor(i,r,s,l,p){this.formBuilder=i,this.missionService=r,this.authService=s,this.router=l,this.titleService=p,this.appUser={email:"",fName:"",isAdmin:!1,lName:"",password:"",id:0}}ngOnInit(){this.loginForm=new n.cw({email:new n.NI(this.appUser.email,[n.kI.required]),password:new n.NI(this.appUser.password,[n.kI.required,n.kI.minLength(4)])}),this.titleService.setTitle("MNS237 - Login")}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}login(i){this.loginForm.invalid||this.authService.checkLogin(this.email.value,this.password.value).subscribe(r=>{if(r){console.log("LoggIn Successfully");const s="/admin";this.missionService.confirmLogging(this.email.value);const l={queryParamsHandling:"preserve",preserveFragment:!0};this.loginForm.reset(),this.router.navigate([s],l)}})}logout(){this.authService.logout()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(n.qu),e.Y36(w.F),e.Y36(N.e),e.Y36(m.F0),e.Y36(f.Dx))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:24,vars:5,consts:[[1,"p-shadow-24"],[1,"row","mb-5"],[1,"col-md-12","text-center"],["data-aos","fade-in-up","data-aos-offset","100",1,"text-primary"],[3,"formGroup","ngSubmit"],[1,"p-d-flex","p-jc-center"],[1,"p-grid"],[1,"p-col-12"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],[1,"pi","pi-user"],["pInputText","","formControlName","email","type","text","placeholder","Email d'utilisateur"],["class","p-col-12",4,"ngIf"],[1,"pi","pi-key"],["type","password","formControlName","password","placeholder","Entre le mot de passe","pPassword","",3,"feedback"],["pButton","","pRipple","","type","submit","label","Envoyer",1,"p-button-rounded",3,"disabled"],["pButton","","routerLink","/registry","type","button","label","Create Account",1,"p-button-text"],["class","p-invalid",4,"ngIf"],[1,"p-invalid"]],template:function(i,r){1&i&&(e.TgZ(0,"section")(1,"p-card",0)(2,"div",1)(3,"div",2)(4,"h1",3),e._uU(5,"S'identifier"),e.qZA()()(),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return r.login(r.loginForm.value)}),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"span",9),e._UZ(12,"i",10),e.qZA(),e._UZ(13,"input",11),e.qZA(),e.YNc(14,I,2,1,"div",12),e.qZA(),e.TgZ(15,"div",7)(16,"div",8)(17,"span",9),e._UZ(18,"i",13),e.qZA(),e._UZ(19,"input",14),e.qZA(),e.YNc(20,_,3,2,"div",12),e.qZA(),e.TgZ(21,"div",7),e._UZ(22,"button",15)(23,"button",16),e.qZA()()()()()()),2&i&&(e.xp6(6),e.Q6J("formGroup",r.loginForm),e.xp6(8),e.Q6J("ngIf",r.email.invalid&&(r.email.dirty||r.email.touched)),e.xp6(5),e.Q6J("feedback",!1),e.xp6(1),e.Q6J("ngIf",r.password.invalid&&(r.password.dirty||r.password.touched)),e.xp6(2),e.Q6J("disabled",r.loginForm.invalid))},directives:[v.Z,n._Y,n.JL,n.sg,n.Fj,h.o,n.JJ,n.u,c.O5,x.QK,b.Hq,Z.H,m.rH],styles:[""]}),t})();function y(t,o,i,r,s,l,p){try{var d=t[l](p),u=d.value}catch(H){return void i(H)}d.done?o(u):Promise.resolve(u).then(r,s)}var V=a(8613),S=a(9646);let P=(()=>{class t{confirm(i){const r=window.confirm(i||"Is it OK?");return(0,S.of)(r)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function L(t,o){1&t&&(e.TgZ(0,"small",24),e._uU(1,"Name is required."),e.qZA())}function Y(t,o){1&t&&(e.TgZ(0,"small",24),e._uU(1,"Name must be at least 4 characters long."),e.qZA())}function J(t,o){if(1&t&&(e.TgZ(0,"div",7),e.YNc(1,L,2,0,"small",23),e.YNc(2,Y,2,0,"small",23),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.fName.errors.required),e.xp6(1),e.Q6J("ngIf",i.fName.errors.minlength)}}function O(t,o){1&t&&(e.TgZ(0,"small",24),e._uU(1," email est requis. "),e.qZA())}function R(t,o){1&t&&(e.TgZ(0,"small",24),e._uU(1," L'email doit comporter au moins 4 caracteres. "),e.qZA())}function k(t,o){1&t&&(e.TgZ(0,"small",24),e._uU(1," l'adresse email n'est pas valide "),e.qZA())}function Q(t,o){if(1&t&&(e.TgZ(0,"div",7),e.YNc(1,O,2,0,"small",23),e.YNc(2,R,2,0,"small",23),e.YNc(3,k,2,0,"small",23),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.email.errors.required),e.xp6(1),e.Q6J("ngIf",i.email.errors.minlength),e.xp6(1),e.Q6J("ngIf",i.email.errors.forbiddenEmail)}}let z=(()=>{class t{constructor(i,r,s,l,p,d){this.route=i,this.router=r,this.userService=s,this.formBuilder=l,this.dialogService=p,this.titleService=d,this.appUser={fName:"",lName:"",email:"",password:"",isAdmin:!1,id:0}}ngOnInit(){this.registryForm=new n.cw({email:new n.NI(this.appUser.email,[n.kI.required,n.kI.minLength(4),t=>{const r=new RegExp("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$").test(t.value);return console.log(" ISOkay = "+r),r?null:{forbiddenEmail:{value:t.value}}}]),fName:new n.NI(this.appUser.fName,[n.kI.required,n.kI.minLength(4),t=>{const r=new RegExp("^[a-z0-9._%+-]").test(t.value);return console.log(" ISOkay = "+r),r?null:{forbiddenFname:{value:t.value}}}]),lName:new n.NI(this.appUser.lName,[n.kI.required,n.kI.minLength(4)]),password:new n.NI(this.appUser.password,[n.kI.required,n.kI.minLength(4),t=>{const r=new RegExp("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$").test(t.value);return console.log(" ISOkay = "+r),r?null:{forbiddenPassword:{value:t.value}}}]),password2:new n.NI(this.appUser.password,[n.kI.required,n.kI.minLength(4)])}),this.route.data.subscribe(i=>{this.appUser=i.appUser}),this.getNumberOfUsers(),this.titleService.setTitle("MNS237 - Cree Un conte")}onSubmit(i){!i||(this.userService.addUser(i).subscribe(),this.registryForm.reset(),this.message="Votre utilisateur a ete soumis",console.warn(this.message,i),this.delay(2e3))}gotoHome(){this.router.navigate(["/home"])}delay(i){var r=this;return function q(t){return function(){var o=this,i=arguments;return new Promise(function(r,s){var l=t.apply(o,i);function p(u){y(l,r,s,p,d,"next",u)}function d(u){y(l,r,s,p,d,"throw",u)}p(void 0)})}}(function*(){yield new Promise(s=>setTimeout(()=>s(1),i)).then(()=>{r.getNumberOfUsers(),r.message=" "})})()}getNumberOfUsers(){return this.userService.getUsers().subscribe(i=>this.numberOfUsers=i.length)}get email(){return this.registryForm.get("email")}get fName(){return this.registryForm.get("fName")}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(m.gz),e.Y36(m.F0),e.Y36(V.K),e.Y36(n.qu),e.Y36(P),e.Y36(f.Dx))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-registry"]],decls:44,vars:5,consts:[[1,"p-shadow-24"],[1,"row","mb-5"],[1,"col-md-12","text-center"],["data-aos","fade-in-up","data-aos-offset","100",1,"text-primary"],[3,"formGroup","ngsubmit"],[1,"p-d-flex","p-jc-center"],[1,"p-grid"],[1,"p-col-12"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],[1,"pi","pi-user"],["pInputText","","formControlName","fName","type","text","placeholder","Nom d'utilisateur"],["class","p-col-12",4,"ngIf"],[1,"pi","pi-pin"],["pInputText","","formControlName","lName","type","text","placeholder","Pre Nom"],[1,"pi","pi-envelope-letter"],["pInputText","","formControlName","email","type","email","placeholder","Email"],[1,"pi","pi-key"],["pInputText","","formControlName","password","type","password","placeholder","Mot de Passe"],["pInputText","","formControlName","password","type","text","placeholder","Entre encore le mot de Passe"],["pButton","","pRipple","","type","submit","label","S'inscrire","name","registry",1,"p-button-rounded"],["pButton","","pRipple","","routerLink","/home","label","Annuler",1,"p-button-rounded"],[1,"text-primary"],["class","p-invalid",4,"ngIf"],[1,"p-invalid"]],template:function(i,r){1&i&&(e.TgZ(0,"section")(1,"p-card",0)(2,"div",1)(3,"div",2)(4,"h1",3),e._uU(5,"S'identifier"),e.qZA(),e.TgZ(6,"h2"),e._uU(7),e.qZA()()(),e.TgZ(8,"form",4),e.NdJ("ngsubmit",function(){return r.onSubmit(r.registryForm.value)}),e.TgZ(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",8)(13,"span",9),e._UZ(14,"i",10),e.qZA(),e._UZ(15,"input",11),e.qZA(),e.YNc(16,J,3,2,"div",12),e.qZA(),e.TgZ(17,"div",7)(18,"div",8)(19,"span",9),e._UZ(20,"i",13),e.qZA(),e._UZ(21,"input",14),e.qZA()(),e.TgZ(22,"div",7)(23,"div",8)(24,"span",9),e._UZ(25,"i",15),e.qZA(),e._UZ(26,"input",16),e.qZA(),e.YNc(27,Q,4,3,"div",12),e.qZA(),e.TgZ(28,"div",7)(29,"div",8)(30,"span",9),e._UZ(31,"i",17),e.qZA(),e._UZ(32,"input",18),e.qZA()(),e.TgZ(33,"div",7)(34,"div",8)(35,"span",9),e._UZ(36,"i",17),e.qZA(),e._UZ(37,"input",19),e.qZA()(),e.TgZ(38,"div",7),e._UZ(39,"button",20),e._uU(40," \xa0\xa0\xa0\xa0 "),e._UZ(41,"button",21),e.qZA()()()(),e.TgZ(42,"h6",22),e._uU(43),e.qZA()()()),2&i&&(e.xp6(7),e.hij(" Nombre d'utilisateurs: ",r.numberOfUsers,""),e.xp6(1),e.Q6J("formGroup",r.registryForm),e.xp6(8),e.Q6J("ngIf",r.fName.invalid&&(r.fName.dirty||r.fName.touched)),e.xp6(11),e.Q6J("ngIf",r.email.invalid&&(r.email.dirty||r.email.touched)),e.xp6(16),e.Oqu(r.message))},directives:[v.Z,n._Y,n.JL,n.sg,n.Fj,h.o,n.JJ,n.u,c.O5,b.Hq,Z.H,m.rH],styles:["#registry[_ngcontent-%COMP%]{margin:0;font-family:sans-serif;display:center;background-repeat:no-repeat}ul[_ngcontent-%COMP%]{background:#3399ff;padding:5px}button[_ngcontent-%COMP%]{border:none;color:#fff;padding:10px 25px;text-align:center;text-decoration:none;font-size:15px}"]}),t})();var M=a(2829);const B=[{path:"",component:F},{path:"login",component:F},{path:"registry",component:z}];let G=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.ez,n.UX,n.u5,M.m,m.Bz.forChild(B)],m.Bz]}),t})()}}]);